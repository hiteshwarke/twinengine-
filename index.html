<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Advanced Image Processor</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    background:#f4f6f8;
    font-family:Arial, sans-serif;
    padding:12px;
}
.app{
    max-width:440px;
    margin:auto;
    background:#fff;
    border-radius:16px;
    padding:16px;
    box-shadow:0 10px 30px rgba(0,0,0,0.08);
}
h3{
    margin:0 0 12px;
    text-align:center;
}
label{
    font-size:14px;
    font-weight:bold;
}
select{
    width:100%;
    padding:10px;
    border-radius:10px;
    border:1px solid #ccc;
    margin-bottom:12px;
}
.upload-box{
    border:2px dashed #bbb;
    border-radius:12px;
    padding:18px;
    text-align:center;
    cursor:pointer;
    background:#fafafa;
    margin-bottom:12px;
}
.upload-box:hover{
    background:#f1f5f9;
}
.upload-box input{ display:none; }
canvas{
    width:100%;
    border-radius:12px;
    margin-top:12px;
    background:#eee;
}
.actions{
    display:flex;
    gap:10px;
    margin-top:12px;
}
button{
    flex:1;
    padding:10px;
    border:none;
    border-radius:10px;
    font-size:15px;
    cursor:pointer;
}
.btn-primary{ background:#4caf50;color:#fff; }
.btn-secondary{ background:#e0e0e0; }
</style>
</head>

<body>
<div class="app">

<h3>üõçÔ∏è Universal Image Processor</h3>

<label>Product Category</label>
<select>
  <option>Saree</option>
  <option>Kurti</option>
  <option>Dress</option>
  <option>Kids</option>
  <option>Home</option>
</select>

<label class="upload-box">
  üì§ Tap to Upload Image
  <input type="file" id="upload" accept="image/*">
</label>

<canvas id="canvas"></canvas>

<div class="actions">
  <button class="btn-secondary" onclick="document.getElementById('upload').click()">Change Image</button>
  <button class="btn-primary" onclick="downloadImage()">Download</button>
</div>

</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

document.getElementById("upload").addEventListener("change", e=>{
    const img=new Image();
    img.onload=()=>processImage(img);
    img.src=URL.createObjectURL(e.target.files[0]);
});

/* ================= MAIN ================= */
function processImage(img){
    canvas.width=img.width;
    canvas.height=img.height;
    ctx.drawImage(img,0,0,canvas.width,canvas.height);

    lowContrastBlend();        
    microOcclusionNoise();     
    textureScramble();         
    perspectiveWarp();         
    dissolveShadows();         
    drawAdaptiveBorder();      
}

/* ============ RULE 1 ============ */
function lowContrastBlend(){
    let d=ctx.getImageData(0,0,canvas.width,canvas.height);
    for(let i=0;i<d.data.length;i+=4){
        d.data[i]   *= 0.97;
        d.data[i+1] *= 0.97;
        d.data[i+2] *= 0.97;
    }
    ctx.putImageData(d,0,0);
}

/* ============ RULE 2 ============ */
function microOcclusionNoise(){
    ctx.save();
    ctx.globalAlpha=0.08;
    for(let i=0;i<60;i++){
        ctx.fillStyle="rgb(255,255,255)";
        ctx.beginPath();
        ctx.arc(Math.random()*canvas.width,Math.random()*canvas.height,Math.random()*6+3,0,Math.PI*2);
        ctx.fill();
    }
    ctx.restore();
}

/* ============ RULE 3 ============ */
function textureScramble(){
    let d=ctx.getImageData(0,0,canvas.width,canvas.height);
    for(let i=0;i<d.data.length;i+=16){
        d.data[i]+=Math.random()*10-5;
        d.data[i+1]+=Math.random()*10-5;
        d.data[i+2]+=Math.random()*10-5;
    }
    ctx.putImageData(d,0,0);
}

/* ============ RULE 4 ============ */
function perspectiveWarp(){
    ctx.save();
    ctx.translate(canvas.width/2,canvas.height/2);
    ctx.transform(1,Math.random()*0.04,Math.random()*0.04,1,0,0);
    ctx.translate(-canvas.width/2,-canvas.height/2);
    ctx.drawImage(canvas,0,0);
    ctx.restore();
}

/* ============ RULE 5 ============ */
function dissolveShadows(){
    let d=ctx.getImageData(0,0,canvas.width,canvas.height);
    for(let i=0;i<d.data.length;i+=4){
        if(d.data[i]<60 && d.data[i+1]<60 && d.data[i+2]<60){
            d.data[i]+=40;
            d.data[i+1]+=40;
            d.data[i+2]+=40;
        }
    }
    ctx.putImageData(d,0,0);
}

/* ============ BORDER (MULTI COLOR RANDOM) ============ */
function drawAdaptiveBorder(){
    const colors = [
        "#e53935", // red
        "#43a047", // green
        "#d81b60", // pink
        "#fdd835", // yellow
        "#fb8c00", // orange
        "#1e88e5", // blue
        "#6d4c41", // chocolate
        "#29b6f6", // sky blue
        "#0d47a1", // navy blue
        "#8e24aa", // purple
        "#00897b", // teal
        "#7b1fa2", // violet
        "#c62828", // maroon
        "#2e7d32", // dark green
        "#1565c0"  // deep blue
    ];

    ctx.strokeStyle = colors[Math.floor(Math.random()*colors.length)];
    ctx.lineWidth = 32;
    ctx.strokeRect(16,16,canvas.width-32,canvas.height-32);
}

/* ============ DOWNLOAD ============ */
function downloadImage(){
    const a=document.createElement("a");
    a.href=canvas.toDataURL("image/jpeg",0.95);
    a.download="processed.jpg";
    a.click();
}
</script>
</body>
</html>
